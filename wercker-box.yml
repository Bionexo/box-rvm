name: rvm
version: 1.0.3
inherits: wercker/ubuntu12.04-webessentials@1.0.4
description: wercker box for Bionexo
type: main
platform: ubuntu@12.04
packages:
  - nodejs@0.12.2
  - npm@2.7.4
  - ruby@2.2.0
  - ruby@2.2.2
  - ruby@2.2.3
  - bunder@1.9.4
  - compass@1.0.3
  - phantomjs@1.9.8
keywords:
  - nodejs
  - yeoman
  - grunt
  - bower
  - ruby
  - rvm
  - compass
  - phantomjs
script: |
  sudo apt-get remove optipng
  sudo apt-get update -y
  # lftp
  sudo apt-get install lftp
  mkdir -p ~/.lftp
  echo "set ssl:verify-certificate no" > ~/.lftp/rc
  # Node.js
  wget https://nodejs.org/dist/v0.12.6/node-v0.12.6.tar.gz
  tar zxf node-v0.12.6.tar.gz
  cd node-v0.12.6
  PYTHON=/usr/bin/python2 /usr/bin/python2 ./configure
  make
  sudo make install
  cd ..
  rm -fr node-v0.12.6*
  node -v
  # npm
  npm -v
  sudo npm cache clean -f
  sudo npm install -g n
  sudo n stable
  # ruby
  sudo apt-get install git zlib1g-dev libreadline-dev libqtwebkit-dev curl -y
  sudo apt-get remove ruby1.9.1
  gpg --keyserver hkp://keys.gnupg.net --recv-keys D39DC0E3
  curl -sSL https://get.rvm.io | bash -s stable
  echo "bundler -v~>1.9.4" > $HOME/.rvm/gemsets/global.gems
  source $HOME/.rvm/scripts/rvm
  rvm install 2.2.0
  rvm install 2.2.2
  rvm install 2.2.3
  rvm --default use 2.2.3
  echo "gem: --no-rdoc --no-ri" >> $HOME/.gemrc
  # install gems
  gem install bundler -v 1.9.4
  gem install compass -v 1.0.3
  # install global npm packages
  sudo npm install -g grunt-cli bower
  # phantomjs
  mkdir phantomjs_2
  cd phantomjs_2
  wget https://s3.amazonaws.com/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2
  tar jxf phantomjs-2.0.0-ubuntu-12.04.tar.bz2
  mv phantomjs ../phantomjs/bin/
  cd ..
  rm -fr pjs
  ldd phantomjs/bin/phantomjs
  phantomjs/bin/phantomjs -v